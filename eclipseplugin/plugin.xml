<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
  
 <!-- Declaring commands -->
 <extension point="org.eclipse.ui.commands">
 	<category id="eclipseplugin.commands.category" name="eclipseplugin.commands.category.name">
 	</category>
 	
 	<command
 		categoryId="eclipseplugin.commands.category"
 		id="eclipseplugin.commands.configureCommand"
 		name="Configure Command">
 	</command>
 	
 	<command
 		categoryId="eclipseplugin.commands.category"
 		id="eclipseplugin.commands.resubmitCommand"
 		name="Resubmit Command">
 	</command>	
 	
 	<command
 		categoryId="eclipseplugin.commands.category"
 		id="eclipseplugin.commands.loginCommand"
 		name="Login Command">
 	</command>	
 	
 	<command
 		categoryId="eclipseplugin.commands.category"
 		id="eclipseplugin.commands.logoutCommand"
 		name="Logout Command">
 	</command>	
 	
 	<command
 		categoryId="eclipseplugin.commands.category"
 		id="eclipseplugin.commands.pulldownCommand"
 		name="Pulldown Command">
 	</command>		
 	
 	<command
  		categoryId="eclipseplugin.commands.category"
  		id="eclipseplugin.commands.rightClickCommand"
  		name="Right Click Command">
  	</command>
 		
 </extension>	

 <!-- Adding image to pulldown command -->
 <extension point="org.eclipse.ui.commandImages">
  	<image 
  		commandId="eclipseplugin.commands.pulldownCommand"
  		icon="icons/swamp-logo-square-height-20.png">
  	</image>
  </extension>  
  
 <!-- Associating handlers with the commands -->
 <extension point="org.eclipse.ui.handlers">
 	<handler
 		class="eclipseplugin.handlers.ConfigureHandler"
 		commandId="eclipseplugin.commands.configureCommand">
 	</handler>
 	
 	<handler
 		class="eclipseplugin.handlers.ResubmitHandler"
 		commandId="eclipseplugin.commands.resubmitCommand">
 	</handler>
 	
 	<handler
 		class="eclipseplugin.handlers.LoginHandler"
 		commandId="eclipseplugin.commands.loginCommand">
 		<enabledWhen>
 			<not>
 				<test property="eclipseplugin.properties.loggedIn">
 				</test>
 			</not>
 		</enabledWhen>
 	</handler>
  
  	<handler
 		class="eclipseplugin.handlers.LogoutHandler"
 		commandId="eclipseplugin.commands.logoutCommand">
 		<enabledWhen>
 			<test property="eclipseplugin.properties.loggedIn">
 			</test>
 		</enabledWhen>
 	</handler>
  	
  	<handler
 		class="eclipseplugin.handlers.ResubmitHandler"
 		commandId="eclipseplugin.commands.pulldownCommand">
 	</handler>
 	
 	<handler
 		class="eclipseplugin.handlers.RightClickHandler"
 		commandId="eclipseplugin.commands.rightClickCommand">
  	</handler>
 </extension>
  
 <!-- Adding to menus -->
 <extension point="org.eclipse.ui.menus">
 	<!-- SWAMP Button and dropdown -->
 	<menuContribution locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
 		<toolbar
  			id="eclipseplugins.toolbars.swampToolbar">
  			<command
  				commandId="eclipseplugin.commands.pulldownCommand"
  				label="SWAMP Button"
  				tooltip="Resubmit Previous Assessment"
  				style="pulldown"
  				id="eclipseplugin.commands.swampButton">
  			</command>
  		</toolbar>
  	</menuContribution>
  	
  	<menuContribution locationURI="menu:eclipseplugin.commands.swampButton">
  		<command
  			commandId="eclipseplugin.commands.resubmitCommand"
  			label="Resubmit Previous Assessment"
  			mnemonic="R"
  			style="push">
  		</command>
  		<command
  			commandId="eclipseplugin.commands.configureCommand"
  			label="Configure Assessment Submission"
  			mnemonic="C"
  			style="push">
  		</command>
		<command
			commandId="eclipseplugin.commands.loginCommand"
			label="Log In"
			mnemonic="I"
			style="push">
		</command>
		<command
			commandId="eclipseplugin.commands.logoutCommand"
			label="Log Out"
			mnemonic="O"
			style="push">
		</command>
	</menuContribution>  			
	
	<!-- Main menu -->
 </extension> 			
 
 
 <!-- Property tester for login/logout -->
 <extension point="org.eclipse.core.expressions.propertyTesters">
 	<propertyTester
 		class="eclipseplugin.handlers.LoginPropertyTester"
 		id="eclipseplugin.loginPropertyTester"
 		namespace="eclipseplugin.properties"
 		properties="loggedIn"
 		type="java.lang.Object">
 	</propertyTester>
 </extension>
 
 
 <!-- Class to trigger plug-in activation -->
 <extension point="org.eclipse.ui.startup">
 	<startup class="eclipseplugin.ActivationTriggerDummy">
 	</startup>
 </extension>
 
</plugin>     